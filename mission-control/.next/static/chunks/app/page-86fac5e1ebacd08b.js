(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9326:(e,s,t)=>{Promise.resolve().then(t.bind(t,9809))},9809:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(5155);t(347);var l=t(2115);function i(){let[e,s]=(0,l.useState)("overview"),[t,i]=(0,l.useState)(""),[n,r]=(0,l.useState)([]),[c,d]=(0,l.useState)([]),[x,o]=(0,l.useState)([]),[h,m]=(0,l.useState)([]),[p,j]=(0,l.useState)(!0),[g,N]=(0,l.useState)(""),b=async()=>{try{let[e,s,t,a]=await Promise.all([fetch("/api/cron-health"),fetch("/api/tool-status"),fetch("/api/skills-status"),fetch("/api/briefings")]),l=await e.json();l.jobs&&r(l.jobs);let i=await s.json();i&&Object.keys(i).length>0&&d(Object.entries(i).map(e=>{let[s,t]=e;return{name:s,type:t.type||"unknown",status:t.status||"unknown",last_tested:t.last_tested,last_error:t.last_error,recommendation:t.recommendation||"No recommendation"}}));let n=await t.json();n.skills&&o(n.skills);let c=await a.json();c.briefings&&m(c.briefings),N(new Date().toLocaleTimeString())}catch(e){console.error("Failed to fetch:",e)}finally{j(!1)}};(0,l.useEffect)(()=>{i(new Date().toLocaleTimeString());let e=setInterval(()=>i(new Date().toLocaleTimeString()),1e3);b();let s=setInterval(b,3e4);return()=>{clearInterval(e),clearInterval(s)}},[]);let u=e=>"w-2 h-2 rounded-full ".concat("operational"===e||"ok"===e||"installed"===e||"delivered"===e||"resolved"===e?"bg-green-400":"failed"===e||"error"===e?"bg-red-400":"busy"===e||"pending"===e?"bg-yellow-400":"bg-white/30"),f=e=>"operational"===e||"ok"===e||"installed"===e||"delivered"===e||"resolved"===e?"text-green-400":"failed"===e||"error"===e?"text-red-400":"busy"===e||"pending"===e?"text-yellow-400":"text-white/50",w=e=>e?e<1e3?"".concat(e,"ms"):"".concat((e/1e3).toFixed(1),"s"):"-";return(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground p-6",children:[(0,a.jsxs)("header",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-primary mb-1",children:"Mission Control \uD83E\uDD9E"}),(0,a.jsx)("p",{className:"text-white/60 text-sm",children:"Percy Corp Agent Orchestration"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xl font-mono text-primary",children:t}),g&&(0,a.jsxs)("p",{className:"text-white/30 text-xs",children:["Data: ",g]})]})]}),p&&(0,a.jsx)("div",{className:"mb-4 p-2 bg-yellow-400/10 text-yellow-400 text-xs",children:"Loading..."}),(0,a.jsx)("div",{className:"flex gap-2 mb-6 border-b border-white/10 pb-2 flex-wrap",children:["overview","crons","api-status","skills","briefings"].map(t=>(0,a.jsx)("button",{onClick:()=>s(t),className:"px-4 py-2 rounded-t-lg ".concat(e===t?"bg-primary/20 text-primary":"text-white/60 hover:text-white"),children:"crons"===t?"Cron (".concat(n.length,")"):"api-status"===t?"API (".concat(c.length,")"):"skills"===t?"Skills (".concat(x.length,")"):"briefings"===t?"Briefings (".concat(h.length,")"):"Overview"},t))}),"overview"===e&&(0,a.jsx)("section",{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{className:"glass-card p-3",children:[(0,a.jsx)("p",{className:"text-white/40 text-xs",children:"Cron Jobs"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:n.length})]}),(0,a.jsxs)("div",{className:"glass-card p-3",children:[(0,a.jsx)("p",{className:"text-white/40 text-xs",children:"Errors"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-400",children:n.filter(e=>"error"===e.lastStatus).length})]}),(0,a.jsxs)("div",{className:"glass-card p-3",children:[(0,a.jsx)("p",{className:"text-white/40 text-xs",children:"APIs"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:c.length})]}),(0,a.jsxs)("div",{className:"glass-card p-3",children:[(0,a.jsx)("p",{className:"text-white/40 text-xs",children:"Briefings"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:h.length})]})]})}),"crons"===e&&(0,a.jsx)("section",{children:0===n.length?(0,a.jsx)("p",{className:"text-white/40",children:"No cron jobs."}):(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-white/40 border-b border-white/10",children:[(0,a.jsx)("th",{className:"text-left py-2",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Name"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Last Run"}),(0,a.jsx)("th",{className:"text-left py-2",children:"Duration"})]})}),(0,a.jsx)("tbody",{children:n.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/5",children:[(0,a.jsx)("td",{className:"py-2",children:(0,a.jsxs)("span",{className:"".concat(f(e.lastStatus)," flex items-center gap-1"),children:[(0,a.jsx)("span",{className:u(e.lastStatus)}),e.lastStatus]})}),(0,a.jsx)("td",{className:"py-2",children:e.name}),(0,a.jsx)("td",{className:"py-2",children:"-"!==e.lastRun?new Date(e.lastRun).toLocaleString():"-"}),(0,a.jsx)("td",{className:"py-2 font-mono text-xs",children:w(e.lastDuration)})]},e.id))})]})}),"api-status"===e&&(0,a.jsx)("section",{children:0===c.length?(0,a.jsx)("p",{className:"text-white/40",children:"No API data."}):(0,a.jsx)("div",{className:"grid gap-3",children:c.map(e=>(0,a.jsxs)("div",{className:"glass-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:u(e.status)}),(0,a.jsx)("span",{className:"font-semibold",children:e.name}),(0,a.jsx)("span",{className:"text-xs ".concat(f(e.status)),children:e.status})]}),e.last_error&&(0,a.jsx)("p",{className:"text-red-400 text-xs",children:e.last_error}),(0,a.jsx)("p",{className:"text-white/40 text-xs mt-1",children:e.recommendation})]},e.name))})}),"skills"===e&&(0,a.jsx)("section",{children:0===x.length?(0,a.jsx)("p",{className:"text-white/40",children:"No skills."}):(0,a.jsx)("div",{className:"grid gap-2 md:grid-cols-2",children:x.slice(0,20).map(e=>(0,a.jsx)("div",{className:"glass-card p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:u(e.status)}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:e.name})]})},e.name))})}),"briefings"===e&&(0,a.jsxs)("section",{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Briefings"}),(0,a.jsx)("p",{className:"text-white/40 text-xs",children:"Morning and evening briefings, plus issues requiring human attention."})]}),0===h.length?(0,a.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,a.jsx)("p",{className:"text-white/40",children:"No briefings yet."}),(0,a.jsx)("p",{className:"text-white/30 text-xs mt-2",children:"Briefings appear here after delivery."})]}):(0,a.jsx)("div",{className:"grid gap-3",children:h.map(e=>(0,a.jsxs)("div",{className:"glass-card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat("morning"===e.type?"bg-yellow-400/20 text-yellow-400":"evening"===e.type?"bg-purple-400/20 text-purple-400":"bg-red-400/20 text-red-400"),children:e.type.toUpperCase()}),(0,a.jsx)("span",{className:"font-semibold",children:e.title})]}),(0,a.jsx)("span",{className:"text-xs ".concat(f(e.status)),children:e.status})]}),(0,a.jsx)("p",{className:"text-white/60 text-sm whitespace-pre-wrap",children:e.content}),(0,a.jsx)("p",{className:"text-white/30 text-xs mt-2",children:new Date(e.timestamp).toLocaleString()})]},e.id))}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-blue-400/10 border border-blue-400/20 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-blue-400 text-sm font-semibold mb-2",children:"How This Works"}),(0,a.jsxs)("ul",{className:"text-white/60 text-xs space-y-1",children:[(0,a.jsx)("li",{children:"• Morning brief: 9AM daily"}),(0,a.jsx)("li",{children:"• Evening brief: 6PM daily"}),(0,a.jsx)("li",{children:"• Issues: Flagged when I need human help"}),(0,a.jsx)("li",{children:"• All persisted here for history"})]})]})]})]})}},347:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[690,441,517,358],()=>s(9326)),_N_E=e.O()}]);