/**
 * x402.ts
 *
 * Framework-agnostic x402 payment protocol integration.
 *
 * Provides types, header constants, base64 encode/decode helpers,
 * a facilitator HTTP client, and a high-level processX402Payment function.
 *
 * No framework imports. No `@x402/*` dependency — the facilitator API
 * is just 2 HTTP POSTs (verify + settle).
 */
export declare const X402_HEADERS: {
    readonly PAYMENT_REQUIRED: "Payment-Required";
    readonly PAYMENT_SIGNATURE: "Payment-Signature";
    readonly PAYMENT_RESPONSE: "Payment-Response";
};
/** Network identifier (e.g. "eip155:84532") */
export type Network = string;
/** Resource being paid for */
export interface ResourceInfo {
    url: string;
    description?: string;
}
/** A single payment option the server accepts */
export interface PaymentRequirements {
    scheme: string;
    network: Network;
    amount: string;
    asset: string;
    payTo: string;
    maxTimeoutSeconds?: number;
}
/** Full 402 response payload (base64-encoded in header) */
export interface PaymentRequired {
    accepts: PaymentRequirements[];
    resource: ResourceInfo;
}
/** Client-side payment payload (base64-encoded in header) */
export interface PaymentPayload {
    signature: string;
    payment: {
        scheme: string;
        network: Network;
        amount: string;
        asset: string;
        payTo: string;
        nonce?: string;
    };
    resource: ResourceInfo;
}
/** Facilitator verify response */
export interface VerifyResponse {
    valid: boolean;
    reason?: string;
}
/** Facilitator settle response */
export interface SettleResponse {
    success: boolean;
    txHash?: string;
    reason?: string;
}
/** Result of processing an x402 payment */
export type X402Result = {
    valid: true;
    payment: X402Payment;
} | {
    valid: false;
    error: string;
};
/** Verified payment info attached to the request */
export interface X402Payment {
    scheme: string;
    network: Network;
    amount: string;
    asset: string;
    payTo: string;
    txHash?: string;
}
/** Facilitator client with verify + settle methods */
export interface FacilitatorClient {
    verify(payload: PaymentPayload, requirements: PaymentRequirements[]): Promise<VerifyResponse>;
    settle(payload: PaymentPayload, requirements: PaymentRequirements[]): Promise<SettleResponse>;
}
/** Stored session data for a paid agent */
export interface X402Session {
    paidAt: number;
    txHash?: string;
}
/** Pluggable session store keyed by (address, resource) */
export interface X402SessionStore {
    get(address: string, resource: string): Promise<X402Session | null>;
    set(address: string, resource: string, session: X402Session, ttlMs: number): Promise<void>;
}
/** Session configuration for SIWX pay-once mode */
export interface X402SessionConfig {
    store: X402SessionStore;
    /** Session TTL in milliseconds */
    ttl: number;
}
/** x402 configuration for middleware */
export interface X402Config {
    facilitator: FacilitatorClient;
    resource: ResourceInfo;
    accepts: PaymentRequirements[];
    /** Enable SIWX pay-once sessions. When set, payment is only required on first request. */
    session?: X402SessionConfig;
}
/**
 * Encode data as a base64 JSON string for use in HTTP headers.
 */
export declare function encodeX402Header(data: unknown): string;
/**
 * Decode a base64 JSON header value.
 */
export declare function decodeX402Header<T = unknown>(header: string): T;
/**
 * Create a facilitator client that communicates via HTTP.
 *
 * The x402 facilitator exposes two endpoints:
 *   - POST /verify — validates a payment signature
 *   - POST /settle — settles the payment on-chain
 */
export declare function createFacilitatorClient(options: {
    url: string;
}): FacilitatorClient;
/**
 * In-memory X402 session store with TTL-based expiry.
 *
 * Suitable for single-process servers. For multi-instance deployments,
 * implement X402SessionStore with a shared store (Redis, database, etc.).
 */
export declare function createMemoryX402SessionStore(): X402SessionStore;
/**
 * Verify and settle an x402 payment in one call.
 *
 * 1. Calls facilitator.verify() to validate the payment signature
 * 2. If valid, calls facilitator.settle() to execute the on-chain transfer
 * 3. Returns the payment details with transaction hash
 */
export declare function processX402Payment(payload: PaymentPayload, accepts: PaymentRequirements[], facilitator: FacilitatorClient): Promise<X402Result>;
