/**
 * hono.ts
 *
 * Server-side wrappers for Hono applications.
 * Uses web standard Request/Response APIs.
 *
 * @example
 * ```ts
 * import { Hono } from "hono";
 * import { siwaMiddleware, siwaCors } from "@buildersgarden/siwa/hono";
 *
 * const app = new Hono();
 * app.use("*", siwaCors());
 * app.post("/api/protected", siwaMiddleware(), (c) => {
 *   return c.json({ agent: c.get("agent") });
 * });
 * ```
 */
import type { MiddlewareHandler } from 'hono';
import { type SiwaAgent, type VerifyOptions } from '../erc8128.js';
import type { SignerType } from '../signer/index.js';
import { type X402Config, type X402Payment } from '../x402.js';
export type { SiwaAgent, X402Payment };
export interface SiwaMiddlewareOptions {
    /** HMAC secret for receipt verification. Defaults to RECEIPT_SECRET or SIWA_SECRET env. */
    receiptSecret?: string;
    /** RPC URL for optional onchain verification. */
    rpcUrl?: string;
    /** Enable onchain ownerOf check. */
    verifyOnchain?: boolean;
    /** Public client for ERC-1271 or onchain checks. */
    publicClient?: VerifyOptions['publicClient'];
    /** Allowed signer types. Omit to accept all. */
    allowedSignerTypes?: SignerType[];
    /** Optional x402 payment gate. When set, both SIWA auth AND a valid payment are required. */
    x402?: X402Config;
}
export interface SiwaCorsOptions {
    /** Allowed origin(s). Defaults to "*". */
    origin?: string;
    /** Allowed HTTP methods. */
    methods?: string[];
    /** Allowed headers. */
    headers?: string[];
    /** Include x402 payment headers in CORS. */
    x402?: boolean;
}
/**
 * CORS middleware pre-configured with SIWA-specific headers.
 * Handles OPTIONS preflight automatically.
 */
export declare function siwaCors(options?: SiwaCorsOptions): MiddlewareHandler;
/**
 * Hono middleware that verifies ERC-8128 HTTP Message Signatures + SIWA receipt.
 *
 * On success, sets `c.set("agent", agent)` with the verified agent identity.
 * When x402 is configured and payment succeeds, also sets `c.set("payment", payment)`.
 * On failure, responds with 401 (auth) or 402 (payment).
 */
export declare function siwaMiddleware(options?: SiwaMiddlewareOptions): MiddlewareHandler;
